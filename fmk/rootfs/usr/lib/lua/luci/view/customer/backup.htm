<%#
LuCI - Lua Configuration Interface
Copyright 2010 Jo-Philipp Wich <xm@subsignal.org>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0

$Id: backup.htm 5448 2009-10-31 15:54:11Z jow $

-%>

<%+header%>

<script language="javascript">
function backup()
{
	self.location.href="<%=REQUEST_URI%>?backup=kthxbye";
	return true;
}

function defaults()
{
	if (confirm('<%:Proceed reverting all settings and resetting to firmware defaults?%>'))
	  {
		self.location.href="<%=REQUEST_URI%>?reset=yarly";
		return true;
	  }

	 return false;
}
</script>

	<div class="cbi-content">
        <div class="cbi-section">
        	<div class="cbi-section-bg">
        		<div class="cbi-section-title"><%:Backup / Restore%>&nbsp;&nbsp;</div>
            </div>
    	</div>
        <div class="cbi-section">
            <div class="cbi-section-bg">
                <div class="cbi-map">
                    <div class="cbi-value">
                        <div class="cbi-value-title"><%:Backup file%></div>
                        <div class="cbi-value-field"><input class="cbi-button" type="button" value="<%:Backup%>" onclick="backup()" /></div>
                    </div>
                <% if reset_avail then -%>
                	<div class="cbi-value">
                        <div class="cbi-value-title"><%:Reset router to defaults%></div>
                        <div class="cbi-value-field"><input class="cbi-button" type="button" value="<%:Default%>" onclick="defaults()" /></div>
                    </div>
                <% end -%>
<form method="post" action="<%=REQUEST_URI%>" enctype="multipart/form-data">
								<div class="cbi-value">
                        <div class="cbi-value-title"><%:Restore file%></div>
                        <div class="cbi-value-field"><input type="file" name="archive" /> <input class="cbi-button" type="submit" value="<%:Restore%>" /></div>
                    </div>               
</form>
                </div>               
            </div>
    	</div>
    </div>

<%+footer%>